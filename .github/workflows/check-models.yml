name: Check Google Gemini Models

# 수동으로 실행하고 싶을 때 (버튼 클릭)
on:
  workflow_dispatch:

jobs:
  check-available-models:
    runs-on: ubuntu-latest

    steps:
    # 1. 저장소의 코드를 내려받습니다.
    - name: Checkout repository
      uses: actions/checkout@v4

    # 2. 파이썬 환경을 설정합니다.
    - name: Set up Python
      uses: actions/setup-python@v5
      with:
        python-version: '3.11'

    # 3. 필요한 라이브러리를 설치합니다.
    - name: Install dependencies
      run: |
        python -m pip install --upgrade pip
        pip install google-genai python-dotenv

    # 4. 스크립트를 실행합니다. (경로 수정됨)
    - name: Run Model Check Script
      env:
        # 깃허브 Settings > Secrets에 저장된 키를 사용
        GOOGLE_API_KEY: ${{ secrets.GOOGLE_API_KEY }}
        # 혹시 모를 모듈 경로 문제를 방지하기 위해 현재 위치(.)를 PYTHONPATH에 추가
        PYTHONPATH: .
      run: |
        # 파일 경로를 app/utils/check_models.py 로 지정
        python app/utils/check_models.py
